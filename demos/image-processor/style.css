:root {
    /* PALETTE: Obsidian, Ash, Embers, and Oxidized Copper */
    --bg-earth: #1a1816;       /* Volcanic rock / Deep cave */
    --bg-panel: #262220;       /* Dark hewn stone */
    --accent-brick: #8c3b2d;   /* Dried blood / Deep rust */
    --accent-copper: #cca478;  /* Bright polished bronze (for contrast) */
    --accent-teal: #2f5e5e;    /* Deep river water */
    --text-soot: #dcd6c8;      /* Bone / Old Parchment (Light text) */
    --text-muted: #8c7b6c;     /* Faded carving */
    --border-color: #4a3e36;   /* Dark clay border */
    
    /* SHADOWS: Deep black for high contrast against dark backgrounds */
    --shadow-color: #000000;

    /* DIMENSIONS: Adhering to strict geometric ratios */
    --spacing-unit: 1rem;
    --border-width: 3px;
    --radius-slight: 2px;
}

/* GLOBAL RESET & TYPOGRAPHY */
* {
    box-sizing: border-box;
}

body {
    background-color: var(--bg-earth);
    color: var(--text-soot);
    font-family: 'Courier New', Courier, monospace; 
    margin: 0;
    padding: 2rem;
    line-height: 1.5;
    /* Inverted grain texture: lighter specs on dark background */
    background-image: radial-gradient(rgba(255, 255, 255, 0.05) 20%, transparent 20%),
                      radial-gradient(rgba(255, 255, 255, 0.05) 20%, transparent 20%);
    background-size: 4px 4px;
    background-position: 0 0, 2px 2px;
}

/* HEADERS */
h1, h2, h3 {
    text-transform: uppercase;
    letter-spacing: 0.15em;
    border-bottom: var(--border-width) solid var(--accent-brick);
    padding-bottom: 0.5rem;
    margin-top: 0;
    color: var(--accent-copper); /* Headings now pop with metal color */
    text-shadow: 2px 2px 0px #000;
}

h1 {
    font-size: 1.8rem;
    border-bottom: 6px double var(--accent-brick);
}

/* LAYOUT UTILITIES */
hr {
    border: 0;
    height: var(--border-width);
    background: var(--border-color);
    margin: 2rem 0;
    opacity: 0.3;
}

/* CONTAINERS & FIELDSETS */
fieldset {
    background-color: var(--bg-panel);
    border: var(--border-width) solid var(--border-color);
    margin-bottom: 1.5rem;
    padding: 1.5rem;
    box-shadow: inset 0 0 20px #000; /* Inner shadow makes it feel recessed/carved */
}

legend {
    background-color: var(--accent-brick);
    color: var(--bg-earth); /* Dark text on the brick label */
    padding: 0.2rem 0.8rem;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.8rem;
    letter-spacing: 1px;
    border: var(--border-width) solid var(--accent-brick);
    box-shadow: 4px 4px 0px var(--shadow-color);
}

/* CONTROLS & INPUTS */
label {
    font-weight: bold;
    display: inline-block;
    margin-right: 0.5rem;
    color: var(--accent-copper); /* Labels are now metallic */
}

select, input[type="text"], input[type="file"] {
    background: var(--bg-earth);
    border: 2px solid var(--border-color);
    padding: 0.5rem;
    font-family: inherit;
    color: var(--text-soot);
    cursor: pointer;
    box-shadow: inset 2px 2px 5px #000; /* Recessed look */
}

select:focus, input:focus {
    outline: none;
    border-color: var(--accent-copper);
    background: #000; /* Deep black on focus */
    color: #fff;
}

/* BUTTONS */
button {
    background-color: var(--bg-panel);
    border: 2px solid var(--text-soot);
    color: var(--text-soot);
    padding: 0.6rem 1.2rem;
    text-transform: uppercase;
    font-weight: bold;
    font-family: inherit;
    cursor: pointer;
    box-shadow: 4px 4px 0px var(--shadow-color); /* Deep black shadow */
    transition: all 0.1s ease;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
}

button:hover {
    background-color: var(--accent-brick);
    color: var(--bg-earth);
    border-color: var(--accent-brick);
    transform: translate(-1px, -1px);
    box-shadow: 5px 5px 0px var(--shadow-color);
}

button:active {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0px var(--shadow-color);
}

/* Special Primary Button */
#btn-process {
    background-color: var(--accent-teal);
    color: #fff;
    border-color: #000;
}

#btn-process:hover {
    background-color: #3d7a7a;
    color: #fff;
}

/* RANGE SLIDERS */
input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    background: transparent;
    margin: 1.5rem 0;
}

input[type="range"]:focus {
    outline: none;
}

/* Webkit Track */
input[type="range"]::-webkit-slider-runnable-track {
    width: 100%;
    height: 10px;
    cursor: pointer;
    background: #111; /* Very dark track */
    border: 2px solid var(--border-color);
    box-shadow: inset 1px 1px 2px rgba(0,0,0,0.8);
}

/* Webkit Thumb */
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    border: 2px solid #000;
    height: 24px;
    width: 14px;
    background: var(--accent-brick);
    cursor: pointer;
    margin-top: -9px;
    box-shadow: 3px 3px 0px var(--shadow-color);
    transition: transform 0.1s, box-shadow 0.1s, background-color 0.2s;
}

/* Firefox Track */
input[type="range"]::-moz-range-track {
    width: 100%;
    height: 10px;
    cursor: pointer;
    background: #111;
    border: 2px solid var(--border-color);
    box-shadow: inset 1px 1px 2px rgba(0,0,0,0.8);
}

/* Firefox Thumb */
input[type="range"]::-moz-range-thumb {
    border: 2px solid #000;
    height: 24px;
    width: 14px;
    background: var(--accent-brick);
    cursor: pointer;
    border-radius: 0;
    box-shadow: 3px 3px 0px var(--shadow-color);
    transition: transform 0.1s, box-shadow 0.1s, background-color 0.2s;
}

/* Hover & Active States for Slider */
input[type="range"]::-webkit-slider-thumb:hover,
input[type="range"]::-moz-range-thumb:hover {
    background: var(--accent-copper);
}

input[type="range"]:active::-webkit-slider-thumb {
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0px var(--shadow-color);
}

input[type="range"]:active::-moz-range-thumb {
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0px var(--shadow-color);
}

/* WORKSPACE TABLE */
table {
    border-collapse: collapse;
    background: var(--bg-earth);
    border: var(--border-width) solid var(--border-color);
}

th {
    background: #111;
    color: var(--accent-copper);
    padding: 1rem;
    text-align: left;
    text-transform: uppercase;
    font-size: 0.9rem;
    border-bottom: 2px solid var(--accent-brick);
}

td {
    border: 1px solid var(--border-color);
    padding: 1rem;
    vertical-align: top;
    color: var(--text-soot);
}

/* CANVAS & IMAGES */
img, canvas {
    border: 4px solid var(--accent-copper);
    background: #000;
    display: block;
    max-width: 100%;
    /* Add a subtle glow to images */
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
}

/* LOGS */
textarea#console-log {
    width: 100%;
    background-color: #0d0d0d; /* Pitch black */
    color: var(--accent-copper); /* Copper text stays */
    border: 4px solid var(--border-color);
    padding: 1rem;
    font-size: 0.9rem;
    font-family: 'Courier New', Courier, monospace;
    box-shadow: inset 0 0 10px #000;
}

/* TELEMETRY METRICS */
#metrics ul {
    list-style-type: none;
    padding: 0;
    display: flex;
    gap: 2rem;
    border: 1px solid var(--border-color);
    padding: 1rem;
    background: var(--bg-earth); /* Changed from white to dark */
}

#metrics li {
    font-weight: bold;
    color: var(--accent-brick);
}

#metrics span {
    color: var(--text-soot);
    margin-left: 0.5rem;
}

/* UTILITY FOOTER */
footer {
    margin-top: 4rem;
    border-top: 1px solid var(--border-color);
    padding-top: 1rem;
    font-size: 0.8rem;
    opacity: 0.4;
    text-align: right;
    color: var(--text-muted);
}
